<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Input Dropdown Menu with Full Path</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .dropdown-menu li {
            position: relative;
        }
        .dropdown-submenu {
            display: none;
            position: absolute;
            left: 100%;
            top: -7px;
        }
        .dropdown-submenu-left {
            right: 100%;
            left: auto;
        }
        .dropdown-menu > li:hover > .dropdown-submenu {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="dropdown">
            <input type="text" class="form-control" id="dropdownInput" placeholder="Select an option" readonly>
            <ul class="dropdown-menu w-100" id="dropdownMenu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li>
                    <a class="dropdown-item" href="#">
                        Submenu &raquo;
                    </a>
                    <ul class="dropdown-menu dropdown-submenu">
                        <li><a class="dropdown-item" href="#">Submenu item 1</a></li>
                        <li><a class="dropdown-item" href="#">Submenu item 2</a></li>
                        <li>
                            <a class="dropdown-item" href="#">Submenu item 3 &raquo; </a>
                            <ul class="dropdown-menu dropdown-submenu">
                                <li><a class="dropdown-item" href="#">Multi level 1</a></li>
                                <li><a class="dropdown-item" href="#">Multi level 2</a></li>
                            </ul>
                        </li>
                        <li><a class="dropdown-item" href="#">Submenu item 4</a></li>
                        <li><a class="dropdown-item" href="#">Submenu item 5</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const dropdownInput = document.getElementById('dropdownInput');
            const dropdownMenu = document.getElementById('dropdownMenu');
            let isOpen = false;
        
            // Add a new p tag after the dropdown for displaying the full path
            const pathDisplay = document.createElement('p');
            pathDisplay.id = 'pathDisplay';
            pathDisplay.style.marginTop = '10px';
            dropdownInput.parentNode.insertBefore(pathDisplay, dropdownInput.nextSibling);
        
            dropdownInput.addEventListener('click', function() {
                isOpen = !isOpen;
                if (isOpen) {
                    dropdownMenu.classList.add('show');
                } else {
                    dropdownMenu.classList.remove('show');
                }
            });
        
            document.addEventListener('click', function(event) {
                const isClickInside = dropdownInput.contains(event.target) || dropdownMenu.contains(event.target);
                if (!isClickInside && isOpen) {
                    dropdownMenu.classList.remove('show');
                    isOpen = false;
                }
            });
        
            dropdownMenu.addEventListener('click', function(event) {
                if (event.target.classList.contains('dropdown-item')) {
                    const fullPath = getFullPath(event.target);
                    const parentText = getParentText(event.target); // Get the parent text
        
                    // Display the parent text in the console or use it as needed
                    console.log('Parent Text:', parentText); 
        
                    dropdownInput.value = fullPath; // Display the full path in the input field
                    pathDisplay.textContent = 'Selected Path: ' + fullPath; // Display the full path in the p tag
                    dropdownMenu.classList.remove('show');
                    isOpen = false;
                }
            });
        
            // Function to get the full path of the selected dropdown item
            function getFullPath(element) {
                let path = [];
                let current = element;
                while (current && !current.classList.contains('dropdown')) {
                    if (current.classList.contains('dropdown-item')) {
                        // Add text content to path array, removing any trailing '»'
                        let itemText = current.textContent.trim().replace(/\s*»\s*$/, '');
                        path.unshift(itemText);
                    }
                    current = current.parentElement; // Move up to parent element
                }
                return path.join(' / ');
            }
        
            // Function to get the parent text of the selected submenu item
            function getParentText(element) {
    let path = [];
    let current = element.closest('ul').parentElement.querySelector('.dropdown-item'); 

    while (current) {
        // Add the current parent text to the path array, removing any trailing '»'
        let parentText = current.textContent.trim().replace(/\s*»\s*$/, '');
        path.unshift(parentText); // Add to the beginning of the array

        // Move up to the next parent in the hierarchy
        current = current.closest('ul').parentElement.querySelector('.dropdown-item');
    }

    return path.join(' / ');
}

        });
        </script>
        
    
</body>
</html>
